<html>
    <head>
        <link rel="stylesheet" href="zadanie4.css">
        <script>
            let dragged;
            let id;
            let index;
            let indexDrop;
            let list;

            document.addEventListener("dragstart", ({target}) => {
                var ol = document.getElementById('lista');
                var lists = ol.getElementsByTagName('li');
                console.log(lists);
                let i=1;
                for(let t1 of lists){
                    t1.id = i++; 
                }
                dragged = target;
                id = target.id;
                list = target.parentNode.children;
                for(let i = 0; i < list.length; i += 1) {
                    if(list[i] === dragged){
                    index = i;
                    }
                }
            });

            document.addEventListener("dragover", (event) => {
                event.preventDefault();
            });

            document.addEventListener("drop", ({target}) => {
            if(target.className == "dropzone" && target.id !== id) {
                dragged.remove( dragged );
                for(let i = 0; i < list.length; i += 1) {
                    if(list[i] === target){
                    indexDrop = i;
                    }
                }
                if(index > indexDrop) {
                    target.before( dragged );
                } else {
                target.after( dragged );
                }
                }
            });
        </script>
    </head>
    <body>
        <div class = "container">
            <br>
            <center><p>Można dodawać i usuwać dowolne elementy. Po złapaniu za numer można przesunąć wiersz w dowolne miejsce</p></center>
            <br>
        <ol id = "lista" start = "1" contenteditable="true" >
            <li class="dropzone" id='1' draggable="true">Text1</li>
            <li class="dropzone" id='2' draggable="true">Text2</li>
            <li class="dropzone" id='3' draggable="true">Text3</li>
        </ol>
    </div>
    </body>
</html>